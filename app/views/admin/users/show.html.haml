#page-wrapper
  #page-inner
    .row
      .col-md-12
        %h2= page_header
    %hr
    .row
      .col-md-12
        .panel.panel-default
          .panel-heading
            Basic data about the #{page_header_singularized}
          .panel-body
            .row
              .col-md-9
                %h3 #{@user.username}
                .table-responsive
                  #dataTables-example_wrapper.dataTables_wrapper.form-inline{:role => 'grid'}
                    %table#dataTables-example.table.table-striped.table-bordered.table-hover.dataTable.no-footer{'aria-describedby' => 'dataTables-example_info'}
                      %tbody
                        %tr
                          %td E-mail:
                          %td= @user.email
                        %tr
                          %td Group:
                          %td= @user.group.name
                        %tr
                          %td Sign in count:
                          %td= @user.sign_in_count
                        %tr
                          %td Last sign in:
                          %td= @user.last_sign_in_at.try(:strftime, '%Y/%m/%d %H:%M:%S')
                        %tr
                          %td Current IP:
                          %td= @user.current_sign_in_ip
                        %tr
                          %td Last IP:
                          %td= @user.last_sign_in_ip
                        %tr
                          %td Registered:
                          %td= @user.created_at.strftime('%Y/%m/%d %H:%M:%S')
                        %tr
                          %td Admin:
                          %td= @user.admin? ? 'Yes' : 'No'
              .col-md-3
                %h3 Gravatar
                = gravatar_for(@user)
    .row
      .col-md-12
        .panel.panel-default
          .panel-heading
            Tasks created by this user
          .panel-body
            .table-responsive
              %table.table.table-striped
                %thead
                  %tr
                    %th #
                    %th Name
                    %th Progress
                    %th Status
                    %th Priority
                %tbody
                - @user_tasks.each do |task|
                  %tr
                    %td= task.id
                    %td= truncate(task.name, length: 60)
                    %td
                      .progress.progress-striped
                        .progress-bar.progress-bar-success{'aria-valuemax' => '100', 'aria-valuemin' => '0', 'aria-valuenow' => "#{task.progress}", :role => 'progressbar', :style => "width: #{task.progress}%"}
                          %span.sr-only #{task.progress}% Complete (success)
                    %td= task.status.name
                    %td= task.priority.name
                    %td= link_to 'Show', admin_task_path(task), class: 'btn btn-primary btn-xs'
            .row
              .col-sm-6
                = will_paginate @user_tasks, renderer: BootstrapPagination::Rails, previous_label: 'Previous', next_label: 'Next', inner_window: 2
